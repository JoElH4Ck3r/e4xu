package org.wvxvws.automation.syntax
{
	public class DispatchTable
	{
		//--------------------------------------------------------------------------
		// whitespace
		//--------------------------------------------------------------------------
		
		/**
		 * Tab
		 */
		public function set x9(value:Function):void
		{
			this._table[0x09] = value;
		}
		
		/**
		 * Newline Linefeed
		 */
		public function set xA(value:Function):void
		{
			this._table[0x0A] = value;
		}
		
		/**
		 * Page
		 */
		public function set xC(value:Function):void
		{
			this._table[0x0C] = value;
		}
		
		/**
		 * Return
		 */
		public function set xD(value:Function):void
		{
			this._table[0x0D] = value;
		}
		
		/**
		 * Space
		 */
		public function set x20(value:Function):void
		{
			this._table[0x20] = value;
		}
		
		//--------------------------------------------------------------------------
		// constituen
		//--------------------------------------------------------------------------
		
		/**
		 * Backspace
		 */
		public function set x8(value:Function):void
		{
			this._table[0x08] = value;
		}
		
		/**
		 * !
		 */
		public function set x21(value:Function):void
		{
			this._table[0x21] = value;
		}
		
		/**
		 * $
		 */
		public function set x24(value:Function):void
		{
			this._table[0x24] = value;
		}
		
		/**
		 * %
		 */
		public function set x25(value:Function):void
		{
			this._table[0x25] = value;
		}
		
		/**
		 * &amp;
		 */
		public function set x26(value:Function):void
		{
			this._table[0x26] = value;
		}
		
		/**
		 * &#42;
		 */
		public function set x2A(value:Function):void
		{
			this._table[0x2A] = value;
		}
		
		/**
		 * +
		 */
		public function set x2B(value:Function):void
		{
			this._table[0x2B] = value;
		}
		
		/**
		 * -
		 */
		public function set x2D(value:Function):void
		{
			this._table[0x2D] = value;
		}
		
		/**
		 * .
		 */
		public function set x2E(value:Function):void
		{
			this._table[0x2E] = value;
		}
		
		/**
		 * /
		 */
		public function set x2F(value:Function):void
		{
			this._table[0x2F] = value;
		}
		
		/**
		 * 0
		 */
		public function set x30(value:Function):void
		{
			this._table[0x30] = value;
		}
		
		/**
		 * 1
		 */
		public function set x31(value:Function):void
		{
			this._table[0x31] = value;
		}
		
		/**
		 * 2
		 */
		public function set x32(value:Function):void
		{
			this._table[0x32] = value;
		}
		
		/**
		 * 3
		 */
		public function set x33(value:Function):void
		{
			this._table[0x33] = value;
		}
		
		/**
		 * 4
		 */
		public function set x34(value:Function):void
		{
			this._table[0x34] = value;
		}
		
		/**
		 * 5
		 */
		public function set x35(value:Function):void
		{
			this._table[0x35] = value;
		}
		
		/**
		 * 6
		 */
		public function set x36(value:Function):void
		{
			this._table[0x36] = value;
		}
		
		/**
		 * 7
		 */
		public function set x37(value:Function):void
		{
			this._table[0x37] = value;
		}
		
		/**
		 * 8
		 */
		public function set x38(value:Function):void
		{
			this._table[0x38] = value;
		}
		
		/**
		 * 9
		 */
		public function set x39(value:Function):void
		{
			this._table[0x39] = value;
		}
		
		/**
		 * :
		 */
		public function set x3A(value:Function):void
		{
			this._table[0x3A] = value;
		}
		
		/**
		 * &lt;
		 */
		public function set x3C(value:Function):void
		{
			this._table[0x3C] = value;
		}
		
		/**
		 * =
		 */
		public function set x3D(value:Function):void
		{
			this._table[0x3D] = value;
		}
		
		/**
		 * &gt;
		 */
		public function set x3E(value:Function):void
		{
			this._table[0x3E] = value;
		}
		
		/**
		 * ?
		 */
		public function set x3F(value:Function):void
		{
			this._table[0x3F] = value;
		}
		
		/**
		 * &#64;
		 */
		public function set x40(value:Function):void
		{
			this._table[0x40] = value;
		}
		
		/**
		 * A
		 */
		public function set x41(value:Function):void
		{
			this._table[0x41] = value;
		}
		
		/**
		 * B
		 */
		public function set x42(value:Function):void
		{
			this._table[0x42] = value;
		}
		
		/**
		 * C
		 */
		public function set x43(value:Function):void
		{
			this._table[0x43] = value;
		}
		
		/**
		 * D
		 */
		public function set x44(value:Function):void
		{
			this._table[0x44] = value;
		}
		
		/**
		 * E
		 */
		public function set x45(value:Function):void
		{
			this._table[0x45] = value;
		}
		
		/**
		 * F
		 */
		public function set x46(value:Function):void
		{
			this._table[0x46] = value;
		}
		
		/**
		 * G
		 */
		public function set x47(value:Function):void
		{
			this._table[0x47] = value;
		}
		
		/**
		 * H
		 */
		public function set x48(value:Function):void
		{
			this._table[0x48] = value;
		}
		
		/**
		 * I
		 */
		public function set x49(value:Function):void
		{
			this._table[0x49] = value;
		}
		
		/**
		 * J
		 */
		public function set x4A(value:Function):void
		{
			this._table[0x4A] = value;
		}
		
		/**
		 * K
		 */
		public function set x4B(value:Function):void
		{
			this._table[0x4B] = value;
		}
		
		/**
		 * L
		 */
		public function set x4C(value:Function):void
		{
			this._table[0x4C] = value;
		}
		
		/**
		 * M
		 */
		public function set x4D(value:Function):void
		{
			this._table[0x4D] = value;
		}
		
		/**
		 * N
		 */
		public function set x4E(value:Function):void
		{
			this._table[0x4E] = value;
		}
		
		/**
		 * O
		 */
		public function set x4F(value:Function):void
		{
			this._table[0x4F] = value;
		}
		
		/**
		 * P
		 */
		public function set x50(value:Function):void
		{
			this._table[0x50] = value;
		}
		
		/**
		 * Q
		 */
		public function set x51(value:Function):void
		{
			this._table[0x51] = value;
		}
		
		/**
		 * R
		 */
		public function set x52(value:Function):void
		{
			this._table[0x52] = value;
		}
		
		/**
		 * S
		 */
		public function set x53(value:Function):void
		{
			this._table[0x53] = value;
		}
		
		/**
		 * T
		 */
		public function set x54(value:Function):void
		{
			this._table[0x54] = value;
		}
		
		/**
		 * U
		 */
		public function set x55(value:Function):void
		{
			this._table[0x55] = value;
		}
		
		/**
		 * V
		 */
		public function set x56(value:Function):void
		{
			this._table[0x56] = value;
		}
		
		/**
		 * W
		 */
		public function set x57(value:Function):void
		{
			this._table[0x57] = value;
		}
		
		/**
		 * X
		 */
		public function set x58(value:Function):void
		{
			this._table[0x58] = value;
		}
		
		/**
		 * Y
		 */
		public function set x59(value:Function):void
		{
			this._table[0x59] = value;
		}
		
		/**
		 * Z
		 */
		public function set x5A(value:Function):void 
		{
			this._table[0x5A] = value;
		}
		
		/**
		 * [
		 */
		public function set x5B(value:Function):void
		{
			this._table[0x5B] = value;
		}
		
		/**
		 * ]
		 */
		public function set x5D(value:Function):void
		{
			this._table[0x5D] = value;
		}
		
		/**
		 * ^
		 */
		public function set x5E(value:Function):void
		{
			this._table[0x5E] = value;
		}
		
		/**
		 * _
		 */
		public function set x5F(value:Function):void
		{
			this._table[0x5F] = value;
		}
		
		/**
		 * a
		 */
		public function set x61(value:Function):void
		{
			this._table[0x61] = value;
		}
		
		/**
		 * b
		 */
		public function set x62(value:Function):void
		{
			this._table[0x62] = value;
		}
		
		/**
		 * c
		 */
		public function set x63(value:Function):void
		{
			this._table[0x63] = value;
		}
		
		/**
		 * d
		 */
		public function set x64(value:Function):void
		{
			this._table[0x64] = value;
		}
		
		/**
		 * e
		 */
		public function set x65(value:Function):void
		{
			this._table[0x65] = value;
		}
		
		/**
		 * f
		 */
		public function set x66(value:Function):void
		{
			this._table[0x66] = value;
		}
		
		/**
		 * g
		 */
		public function set x67(value:Function):void
		{
			this._table[0x67] = value;
		}
		
		/**
		 * h
		 */
		public function set x68(value:Function):void
		{
			this._table[0x68] = value;
		}
		
		/**
		 * i
		 */
		public function set x69(value:Function):void
		{
			this._table[0x69] = value;
		}
		
		/**
		 * j
		 */
		public function set x6A(value:Function):void
		{
			this._table[0x6A] = value;
		}
		
		/**
		 * k
		 */
		public function set x6B(value:Function):void
		{
			this._table[0x6B] = value;
		}
		
		/**
		 * l
		 */
		public function set x6C(value:Function):void
		{
			this._table[0x6C] = value;
		}
		
		/**
		 * m
		 */
		public function set x6D(value:Function):void
		{
			this._table[0x6D] = value;
		}
		
		/**
		 * n
		 */
		public function set x6E(value:Function):void
		{
			this._table[0x6E] = value;
		}
		
		/**
		 * o
		 */
		public function set x6F(value:Function):void
		{
			this._table[0x6F] = value;
		}
		
		/**
		 * p
		 */
		public function set x70(value:Function):void
		{
			this._table[0x70] = value;
		}
		
		/**
		 * q
		 */
		public function set x71(value:Function):void
		{
			this._table[0x71] = value;
		}
		
		/**
		 * r
		 */
		public function set x72(value:Function):void
		{
			this._table[0x72] = value;
		}
		
		/**
		 * s
		 */
		public function set x73(value:Function):void
		{
			this._table[0x73] = value;
		}
		
		/**
		 * t
		 */
		public function set x74(value:Function):void
		{
			this._table[0x74] = value;
		}
		
		/**
		 * u
		 */
		public function set x75(value:Function):void
		{
			this._table[0x75] = value;
		}
		
		/**
		 * v
		 */
		public function set x76(value:Function):void
		{
			this._table[0x76] = value;
		}
		
		/**
		 * w
		 */
		public function set x77(value:Function):void
		{
			this._table[0x77] = value;
		}
		
		/**
		 * x
		 */
		public function set x78(value:Function):void
		{
			this._table[0x78] = value;
		}
		
		/**
		 * y
		 */
		public function set x79(value:Function):void
		{
			this._table[0x79] = value;
		}
		
		/**
		 * z
		 */
		public function set x7A(value:Function):void
		{
			this._table[0x7A] = value;
		}
		
		/**
		 * {
		 */
		public function set x7B(value:Function):void
		{
			this._table[0x7B] = value;
		}
		
		/**
		 * }
		 */
		public function set x7D(value:Function):void
		{
			this._table[0x7D] = value;
		}
		
		/**
		 * ~
		 */
		public function set x7E(value:Function):void
		{
			this._table[0x7E] = value;
		}
		
		/**
		 * Rubout
		 */
		public function set x7F(value:Function):void
		{
			this._table[0x7F] = value;
		}
		
		//--------------------------------------------------------------------------
		// terminating macro char
		//--------------------------------------------------------------------------
		
		/**
		 * `
		 */
		public function set x60(value:Function):void
		{
			this._table[0x60] = value;
		}
		
		/**
		 * "
		 */
		public function set x22(value:Function):void
		{
			this._table[0x22] = value;
		}
		
		/**
		 * ,
		 */
		public function set x2C(value:Function):void
		{
			this._table[0x2C] = value;
		}
		
		/**
		 * '
		 */
		public function set x27(value:Function):void
		{
			this._table[0x27] = value;
		}
		
		/**
		 * (
		 */
		public function set x28(value:Function):void
		{
			this._table[0x28] = value;
		}
		
		/**
		 * )
		 */
		public function set x29(value:Function):void
		{
			this._table[0x29] = value;
		}
		
		/**
		 * ;
		 */
		public function set x3B(value:Function):void
		{
			this._table[0x3B] = value;
		}
		
		//--------------------------------------------------------------------------
		// non-terminating macro char
		//--------------------------------------------------------------------------
		
		/**
		 * #
		 */
		public function set x23(value:Function):void
		{
			this._table[0x23] = value;
		}
		
		//--------------------------------------------------------------------------
		// single escape
		//--------------------------------------------------------------------------
		
		/**
		 * \
		 */
		public function set x5C(value:Function):void
		{
			this._table[0x5C] = value;
		}
		
		//--------------------------------------------------------------------------
		// multiple escape
		//--------------------------------------------------------------------------
		
		/**
		 * |
		 */
		public function set x7C(value:Function):void
		{
			this._table[0x7C] = value;
		}
		
		protected const _table:Vector.<Function> = new Vector.<Function>(127, true);
		
		protected const _doubleDispatch:Object = { };
		
		protected const _macroCharacters:Object = 
		{
			 "`" : true,
			 "\"" : true,
			 "," : true,
			 "'" : true,
			 "(" : true,
			 ")" : true,
			 ";" : true,
			 "#" : true
		};
		
		protected const _whiteCharacters:Object = 
		{
			"\x09" : true,
			"\x0A" : true,
			"\x0C" : true,
			"\x0D" : true,
			"\x20" : true
		};
		
		protected const _constitutentCharacters:Object =
		{
			"\x08": true, "\x21": true, "\x24": true, "\x25": true,
			"\x26": true, "\x2A": true, "\x2B": true, "\x2D": true,
			"\x2E": true, "\x2F": true, "\x30": true, "\x31": true,
			"\x32": true, "\x33": true, "\x34": true, "\x35": true,
			"\x36": true, "\x37": true, "\x38": true, "\x39": true,
			"\x3A": true, "\x3C": true, "\x3D": true, "\x3E": true,
			"\x3F": true, "\x40": true, "\x41": true, "\x42": true,
			"\x43": true, "\x44": true, "\x45": true, "\x46": true,
			"\x47": true, "\x48": true, "\x49": true, "\x4A": true,
			"\x4B": true, "\x4C": true, "\x4D": true, "\x4E": true,
			"\x4F": true, "\x50": true, "\x51": true, "\x52": true,
			"\x53": true, "\x54": true, "\x55": true, "\x56": true,
			"\x57": true, "\x58": true, "\x59": true, "\x5A": true,
			"\x5B": true, "\x5D": true, "\x5E": true, "\x5F": true,
			"\x61": true, "\x62": true, "\x63": true, "\x64": true,
			"\x65": true, "\x66": true, "\x67": true, "\x68": true,
			"\x69": true, "\x6A": true, "\x6B": true, "\x6C": true,
			"\x6D": true, "\x6E": true, "\x6F": true, "\x70": true,
			"\x71": true, "\x72": true, "\x73": true, "\x74": true,
			"\x75": true, "\x76": true, "\x77": true, "\x78": true,
			"\x79": true, "\x7A": true, "\x7B": true, "\x7D": true,
			"\x7E": true, "\x7F": true
		};
		
		protected const _singleEscapeCharacters:Object = { "\\": true };
		
		protected const _multiEscapeCharacters:Object = { "|": true };
		
		protected const _notTerminatingCharacters:Object = { "#": true };
		
		/**
		 * Exponent markers
		 * Marker  Meaning                                  
		 * D or d  double-float                             
		 * E or e  float (see &#42;read-default-float-format&#42;)  
		 * F or f  single-float                             
		 * L or l  long-float                               
		 * S or s  short-float  
		 * 
		 * ratio marker n. a character which is used in the textual notation 
		 * for a ratio to separate the numerator from the denominator, and which 
		 * is slash in the standard readtable. See Section 2.1 (Character Syntax). 
		 * 
		 * NOTE: this is something I probably won't implement in a long time...
		 * current input base n. (in a dynamic environment) the radix that is the 
		 * value of &#42;read-base&#42; in that environment, and that is the default radix 
		 * employed by the Lisp reader and its related functions. 
		 * 
		 * May need to throw on :1, :1/2, and :2^3
		 * 
		 * Must throw when cannot parse numbers.
		 * 
		 * These are not numbers: 
		 * \256   25\64   1.0\E6   |100|   3\.14159   |3/4|   3\/4   5||
		 * More examples: http://www.lispworks.com/documentation/HyperSpec/Body/02_caab.htm
		 */
		public function DispatchTable() { super(); }
		
		public function isMacroCharacter(character:String):Boolean
		{
			return character in this._macroCharacters;
		}
		
		public function isWhite(character:String):Boolean
		{
			return character in this._whiteCharacters;
		}
		
		public function isSingleEscape(character:String):Boolean
		{
			return character in this._singleEscapeCharacters;
		}
		
		public function isMultiEscape(character:String):Boolean
		{
			return character in this._multiEscapeCharacters;
		}
		
		public function isConstitutent(character:String):Boolean
		{
			return character in this._constitutentCharacters;
		}
		
		public function isTerminating(character:String):Boolean
		{
			return !(character in this._notTerminatingCharacters);
		}
		
		public function isValid(character:String):Boolean
		{
			return this.hasOwnProperty("x" + 
				character.charCodeAt().toString(16).toUpperCase());
		}
		
		public function toTableCase(character:String):String
		{
			return character.toUpperCase();
		}
		
		public function nextReader(character:String):Function
		{
			return this._table[character.charCodeAt()];
		}
		
		public function getMacroHandler(first:String, second:String):Function
		{
			trace("get-macro-handler", first, second);
			return this._doubleDispatch[first.charAt() + second.charAt()];
		}
		
		public function registerMacroCharacter(handler:Function, 
			first:String, second:String):Function
		{
			// TODO: Maybe we need to check if the first is a macro character?
			return this._doubleDispatch[first.charAt() + second.charAt()] = handler;
		}
	}
}